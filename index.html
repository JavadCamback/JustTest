

<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    
    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-S6LXCS26V5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-S6LXCS26V5');
</script>
    
   <meta name="description" content="Ø³Ø§ÛŒØª Ùˆ Ø¨Ø±Ù†Ø§Ù…Ù‡ Ø¯Ø³ØªÛŒØ§Ø± Ø¹Ø¨Ø§Ø¯Øª, Ø¯Ø³ØªÛŒØ§Ø± Ø¨Ù†Ø¯Ú¯ÛŒ Ø´Ù…Ø§Ø³Øª. Ø³Ø§ÛŒØª Ø¯Ø³ØªÛŒØ§Ø± Ø¹Ø¨Ø§Ø¯Øª Ø¨Ù‡ Ø´Ù…Ø§ Ø§Ù…Ú©Ø§Ù† Ù…ÛŒØ¯Ù‡Ø¯ ØªØ§ Ú©Ø§Ø±Ù†Ø§Ù…Ù‡ Ø§Ø¹Ù…Ø§Ù„ Ø®ÙˆØ¯ Ø±Ø§ Ø¯Ø± Ø§ÛŒÙ† Ø¯Ù†ÛŒØ§ Ø¨Ø¨ÛŒÙ†ÛŒØ¯">
    <meta name="keywords" content="Ø¯Ø³ØªÛŒØ§Ø± Ø¹Ø¨Ø§Ø¯Øª, Ø³Ø§ÛŒØª Ø¯Ø³ØªÛŒØ§Ø± Ø¹Ø¨Ø§Ø¯Øª, Ø¯Ø³ØªÛŒØ§Ø± Ø¨Ù†Ø¯Ú¯ÛŒ, Ø³Ø§ÛŒØª Ø¯Ø³ØªÛŒØ§Ø± Ø¨Ù†Ø¯Ú¯ÛŒ, Ø¹Ø¨Ø§Ø¯Øª Ø¯Ø³ØªÛŒØ§Ø±, Ø¹Ø¨Ø§Ø¯Øª, Ø¬Ø§ÙˆØ¯Ø§Ù† Ú¯ÛŒÙ…Ø², Ø¯Ø³ØªÛŒØ§Ø± Ø¹Ø¨Ø§Ø¯Øª Ù‡Ø§, Dastyar Ebadat, Ù…Ø­Ù…Ø¯Ø¬ÙˆØ§Ø¯ Ø¬Ø§ÙˆØ¯Ø§Ù†ÙØ±Ø¯, Ø¯Ø³ØªÛŒØ§Ø± Ø¹Ø¨Ø§Ø¯Øª Ø´Ù…Ø§">
    <meta charset="UTF-8">
    <meta name="google-site-verification" content="gJ5r_sUtg0DhJu6HpNq9NWGY2_fApFyPMeoqEAGsfgE" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ø¯Ø³ØªÛŒØ§Ø± Ø¹Ø¨Ø§Ø¯Øª</title>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * { font-family: 'Vazirmatn', sans-serif; }
        :root {
            --bg-primary: #f0fdf4;
            --bg-secondary: #ffffff;
            --bg-card: #ffffff;
            --text-primary: #064e3b;
            --text-secondary: #047857;
            --border-color: #a7f3d0;
            --accent: #059669;
        }
        .dark {
            --bg-primary: #022c22;
            --bg-secondary: #064e3b;
            --bg-card: #065f46;
            --text-primary: #ecfdf5;
            --text-secondary: #a7f3d0;
            --border-color: #047857;
            --accent: #34d399;
        }
        body {
            background: var(--bg-primary);
            color: var(--text-primary);
            transition: all 0.3s ease;
        }
        .card {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
        }
        .nav-item.active {
            background: linear-gradient(135deg, #059669, #047857);
            color: white;
        }
        .islamic-pattern {
            background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23059669' fill-opacity='0.08'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
        }
        .toast {
            animation: slideIn 0.3s ease, fadeOut 0.3s ease 2.7s;
        }
        @keyframes slideIn {
            from { transform: translateY(-100%); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        @keyframes fadeOut {
            from { opacity: 1; }
            to { opacity: 0; }
        }
        .checkbox-custom:checked {
            background: #059669;
            border-color: #059669;
        }
        input[type="checkbox"] {
            accent-color: #059669;
        }
        .counter-btn {
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            background: linear-gradient(135deg, #059669, #047857);
            color: white;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.1s;
        }
        .counter-btn:active {
            transform: scale(0.9);
        }
        .nav-arrow {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            background: linear-gradient(135deg, #059669, #047857);
            color: white;
            font-size: 18px;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 2px 8px rgba(5, 150, 105, 0.3);
            flex-shrink: 0;
        }
        .nav-arrow:hover {
            transform: scale(1.1);
        }
        .nav-arrow:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        .tab-btn {
            padding: 6px 10px;
            border-radius: 10px;
            font-weight: 600;
            transition: all 0.2s;
            font-size: 11px;
        }
        .tab-btn.active {
            background: linear-gradient(135deg, #059669, #047857);
            color: white;
        }
        .tab-btn:not(.active) {
            background: var(--bg-primary);
            color: var(--text-secondary);
        }
        .toggle-switch {
            position: relative;
            width: 56px;
            height: 28px;
            flex-shrink: 0;
        }
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: 0.3s;
            border-radius: 28px;
        }
        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 22px;
            width: 22px;
            right: 3px;
            bottom: 3px;
            background-color: white;
            transition: 0.3s;
            border-radius: 50%;
        }
        input:checked + .toggle-slider {
            background-color: #059669;
        }
        input:checked + .toggle-slider:before {
            transform: translateX(-28px);
        }
        
        /* Custom Prayer Select */
        .prayer-select {
            position: relative;
            cursor: pointer;
        }
        .prayer-select-btn {
            padding: 8px 16px;
            border-radius: 10px;
            background: var(--bg-card);
            border: 2px solid var(--border-color);
            color: var(--text-primary);
            font-size: 13px;
            min-width: 130px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 8px;
            transition: all 0.2s;
        }
        .prayer-select-btn:hover {
            border-color: var(--accent);
        }
        .prayer-select-btn.disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        .prayer-dropdown {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            margin-top: 4px;
            background: var(--bg-card);
            border: 2px solid var(--border-color);
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
            z-index: 100;
            overflow: hidden;
            display: none;
        }
        .prayer-dropdown.show {
            display: block;
            animation: dropdownFade 0.2s ease;
        }
        @keyframes dropdownFade {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .prayer-option {
            padding: 10px 14px;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: background 0.2s;
            cursor: pointer;
            font-size: 13px;
            color: var(--text-primary);
        }
        .prayer-option:hover {
            background: var(--bg-primary);
        }
        .prayer-option.selected {
            background: linear-gradient(135deg, rgba(5, 150, 105, 0.2), rgba(4, 120, 87, 0.2));
        }
        
        /* Confirm Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            align-items: center;
            justify-content: center;
            z-index: 1000;
            padding: 20px;
            display: none;
        }
        .modal-overlay.show {
            display: flex;
        }
        .modal-content {
            background: var(--bg-card);
            border-radius: 20px;
            padding: 24px;
            max-width: 320px;
            width: 100%;
            text-align: center;
            animation: modalPop 0.3s ease;
        }
        @keyframes modalPop {
            from { transform: scale(0.8); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }
           .achievement-card {
        background: var(--bg-card);
        border-right: 4px solid transparent;
    }
    .progress-bar-bg {
        background: var(--bg-primary);
        height: 8px;
        border-radius: 4px;
        overflow: hidden;
    }
    .progress-bar-fill {
        height: 100%;
        transition: width 0.5s ease-out;
    }
    </style>
</head>
<body class="islamic-pattern min-h-screen pb-16">
    <!-- Toast Notification -->
    <div id="toast" class="fixed top-4 left-1/2 transform -translate-x-1/2 z-50 hidden">
        <div class="toast bg-gradient-to-r from-green-600 to-emerald-600 text-white px-6 py-3 rounded-xl shadow-lg flex items-center gap-2">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
            </svg>
            <span id="toastMessage">Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø«Ø¨Øª Ø´Ø¯</span>
        </div>
    </div>

    <!-- Confirm Modal -->
    <div id="confirmModal" class="modal-overlay">
        <div class="modal-content">
            <div class="text-5xl mb-4">âš ï¸</div>
            <h3 class="font-bold text-lg mb-2" style="color: var(--text-primary)">Ø­Ø°Ù ØªÙ…Ø§Ù… Ø§Ø·Ù„Ø§Ø¹Ø§Øª</h3>
            <p class="text-sm mb-6" style="color: var(--text-secondary)">Ø¢ÛŒØ§ Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ Ú©Ù‡ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ ØªÙ…Ø§Ù… Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯Ù‡ Ø±Ø§ Ù¾Ø§Ú© Ú©Ù†ÛŒØ¯ØŸ Ø§ÛŒÙ† Ø¹Ù…Ù„ Ù‚Ø§Ø¨Ù„ Ø¨Ø§Ø²Ú¯Ø´Øª Ù†ÛŒØ³Øª.</p>
            <div class="flex gap-3">
                <button onclick="confirmDelete()" class="flex-1 bg-red-600 text-white py-3 rounded-xl font-bold">Ø¨Ù„Ù‡ØŒ Ø­Ø°Ù Ø´ÙˆØ¯</button>
                <button onclick="closeModal()" class="flex-1 py-3 rounded-xl font-bold border-2" style="border-color: var(--border-color); color: var(--text-primary)">Ø§Ù†ØµØ±Ø§Ù</button>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="bg-gradient-to-r from-green-700 via-emerald-600 to-green-700 text-white py-2 px-4 shadow-lg">
        <div class="text-center">
            <h1 class="text-xl font-bold flex items-center justify-center gap-2">
                <span>"</span>
                <span>Ø¯Ø³ØªÛŒØ§Ø± Ø¹Ø¨Ø§Ø¯Øª</span>
                <span>"</span>
            </h1>
            <p id="currentDate" class="text-green-100 text-xs"></p>
        </div>
    </header>

    <!-- Daily Message -->
    <div class="mx-4 mt-4">
        <div class="rounded-2xl p-3 shadow-md border-2 border-orange-400" style="background: linear-gradient(135deg, #fef3c7, #fde68a);">
            <div class="flex items-center gap-2">
                <span class="text-xl">âš </span>
                <p id="dailyMessage" class="text-sm font-medium text-orange-800"></p>
            </div>
        </div>
    </div>

    <!-- Hadith Section -->
    <div class="mx-4 mt-3">
        <div class="card rounded-2xl p-4 shadow-md">
            <div class="flex items-center gap-2 mb-2">
                <span class="text-2xl">ğŸ“¿</span>
                <span class="font-bold text-sm" style="color: var(--text-secondary)">Ø­Ø¯ÛŒØ« Ø±ÙˆØ²Ø§Ù†Ù‡ Ø§Ø² Ø§Ù…ÛŒØ±Ø§Ù„Ù…Ø¤Ù…Ù†ÛŒÙ† Ø¹Ù„ÛŒ (Ø¹)</span>
            </div>
            <p id="dailyHadith" class="text-sm leading-relaxed" style="color: var(--text-primary)"></p>
        </div>
    </div>

    <!-- Date Navigation (Only for Daily Tab) -->
    <div id="dateNavigation" class="mx-4 mt-3">
        <div class="card rounded-2xl p-3 shadow-md flex items-center justify-between">
            <button onclick="navigateDate(1)" class="nav-arrow">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                </svg>
            </button>
            <div class="text-center">
                <p id="selectedDateDisplay" class="font-bold" style="color: var(--text-primary)"></p>
                <p id="selectedDayName" class="text-xs" style="color: var(--text-secondary)"></p>
            </div>
            <button id="prevDayBtn" onclick="navigateDate(-1)" class="nav-arrow">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                </svg>
            </button>
        </div>
    </div>

    <!-- Main Content -->
    <main class="p-4" id="mainContent">
        <!-- Daily Section -->
        <section id="dailySection">
            <!-- Status Message -->
            <div id="statusMessage" class="hidden mb-4">
                <div class="card rounded-xl p-3 text-center border-2 border-amber-400 bg-amber-50 dark:bg-amber-900/30">
                    <p class="text-amber-700 dark:text-amber-300 text-sm font-medium" id="statusText"></p>
                </div>
            </div>

            <!-- Prayers Section -->
            <div class="card rounded-2xl p-4 shadow-md mb-4">
                <h3 class="font-bold mb-4 flex items-center gap-2" style="color: var(--text-primary)">
                    <span class="text-xl">ğŸ•Œ</span>
                    Ù†Ù…Ø§Ø²Ù‡Ø§ÛŒ ÛŒÙˆÙ…ÛŒÙ‡
                </h3>
                <div class="space-y-3">
                    <!-- Fajr Prayer -->
                    <div class="flex items-center justify-between p-3 rounded-xl" style="background: var(--bg-primary)">
                        <span class="font-medium">Ù†Ù…Ø§Ø² ØµØ¨Ø­</span>
                        <div class="prayer-select" data-prayer="prayerFajr">
                            <div class="prayer-select-btn" onclick="togglePrayerDropdown('prayerFajr')">
                                <span class="selected-text">Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</span>
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                </svg>
                            </div>
                            <div class="prayer-dropdown" id="dropdown-prayerFajr">
                                <div class="prayer-option" data-value="" onclick="selectPrayer('prayerFajr', '', 'Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯')">
                                    <span>Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</span>
                                </div>
                                <div class="prayer-option" data-value="ontime" onclick="selectPrayer('prayerFajr', 'ontime', 'Ø§ÙˆÙ„ ÙˆÙ‚Øª ')">
                                    <span>â˜†â˜†â˜†</span><span>Ø§ÙˆÙ„ ÙˆÙ‚Øª</span>
                                </div>
                                <div class="prayer-option" data-value="midtime" onclick="selectPrayer('prayerFajr', 'midtime', 'Ù…ÛŒØ§Ù† ÙˆÙ‚Øª ')">
                                    <span>â˜†â˜†</span><span>Ù…ÛŒØ§Ù† ÙˆÙ‚Øª</span>
                                </div>
                                <div class="prayer-option" data-value="endtime" onclick="selectPrayer('prayerFajr', 'endtime', 'Ø¢Ø®Ø± ÙˆÙ‚Øª ')">
                                    <span>â˜†</span><span>Ø¢Ø®Ø± ÙˆÙ‚Øª</span>
                                </div>
                                <div class="prayer-option" data-value="qaza" onclick="selectPrayer('prayerFajr', 'qaza', 'Ù†Ù…Ø§Ø² Ù‚Ø¶Ø§ ')">
                                    <span>âœ˜</span><span>Ù†Ù…Ø§Ø² Ù‚Ø¶Ø§</span>
                                </div>
                            </div>
                            <input type="hidden" id="prayerFajr" value="">
                        </div>
                    </div>
                    
                    <!-- Zuhr Prayer -->
                    <div class="flex items-center justify-between p-3 rounded-xl" style="background: var(--bg-primary)">
                        <span class="font-medium">Ù†Ù…Ø§Ø² Ø¸Ù‡Ø±</span>
                        <div class="prayer-select" data-prayer="prayerZuhr">
                            <div class="prayer-select-btn" onclick="togglePrayerDropdown('prayerZuhr')">
                                <span class="selected-text">Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</span>
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                </svg>
                            </div>
                            <div class="prayer-dropdown" id="dropdown-prayerZuhr">
                                <div class="prayer-option" data-value="" onclick="selectPrayer('prayerZuhr', '', 'Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯')">
                                    <span>Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</span>
                                </div>
                                <div class="prayer-option" data-value="ontime" onclick="selectPrayer('prayerZuhr', 'ontime', 'Ø§ÙˆÙ„ ÙˆÙ‚Øª ')">
                                    <span>â˜†â˜†â˜†</span><span>Ø§ÙˆÙ„ ÙˆÙ‚Øª</span>
                                </div>
                                <div class="prayer-option" data-value="midtime" onclick="selectPrayer('prayerZuhr', 'midtime', 'Ù…ÛŒØ§Ù† ÙˆÙ‚Øª ')">
                                    <span>â˜†â˜†</span><span>Ù…ÛŒØ§Ù† ÙˆÙ‚Øª</span>
                                </div>
                                <div class="prayer-option" data-value="endtime" onclick="selectPrayer('prayerZuhr', 'endtime', 'Ø¢Ø®Ø± ÙˆÙ‚Øª ')">
                                    <span>â˜†</span><span>Ø¢Ø®Ø± ÙˆÙ‚Øª</span>
                                </div>
                                <div class="prayer-option" data-value="qaza" onclick="selectPrayer('prayerZuhr', 'qaza', 'Ù†Ù…Ø§Ø² Ù‚Ø¶Ø§ ')">
                                    <span>âœ˜</span><span>Ù†Ù…Ø§Ø² Ù‚Ø¶Ø§</span>
                                </div>
                            </div>
                            <input type="hidden" id="prayerZuhr" value="">
                        </div>
                    </div>
                    
                    <!-- Maghrib Prayer -->
                    <div class="flex items-center justify-between p-3 rounded-xl" style="background: var(--bg-primary)">
                        <span class="font-medium">Ù†Ù…Ø§Ø² Ù…ØºØ±Ø¨</span>
                        <div class="prayer-select" data-prayer="prayerMaghrib">
                            <div class="prayer-select-btn" onclick="togglePrayerDropdown('prayerMaghrib')">
                                <span class="selected-text">Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</span>
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                </svg>
                            </div>
                            <div class="prayer-dropdown" id="dropdown-prayerMaghrib">
                                <div class="prayer-option" data-value="" onclick="selectPrayer('prayerMaghrib', '', 'Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯')">
                                    <span>Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</span>
                                </div>
                                <div class="prayer-option" data-value="ontime" onclick="selectPrayer('prayerMaghrib', 'ontime', 'Ø§ÙˆÙ„ ÙˆÙ‚Øª ')">
                                    <span>â˜†â˜†â˜†</span><span>Ø§ÙˆÙ„ ÙˆÙ‚Øª</span>
                                </div>
                                <div class="prayer-option" data-value="midtime" onclick="selectPrayer('prayerMaghrib', 'midtime', 'Ù…ÛŒØ§Ù† ÙˆÙ‚Øª ')">
                                    <span>â˜†â˜†</span><span>Ù…ÛŒØ§Ù† ÙˆÙ‚Øª</span>
                                </div>
                                <div class="prayer-option" data-value="endtime" onclick="selectPrayer('prayerMaghrib', 'endtime', 'Ø¢Ø®Ø± ÙˆÙ‚Øª ')">
                                    <span>â˜†</span><span>Ø¢Ø®Ø± ÙˆÙ‚Øª</span>
                                </div>
                                <div class="prayer-option" data-value="qaza" onclick="selectPrayer('prayerMaghrib', 'qaza', 'Ù†Ù…Ø§Ø² Ù‚Ø¶Ø§ ')">
                                    <span>âœ˜</span><span>Ù†Ù…Ø§Ø² Ù‚Ø¶Ø§</span>
                                </div>
                            </div>
                            <input type="hidden" id="prayerMaghrib" value="">
                        </div>
                    </div>
                </div>
            </div>

            <!-- Duas Section -->
            <div class="card rounded-2xl p-4 shadow-md mb-4">
                <h3 class="font-bold mb-4 flex items-center gap-2" style="color: var(--text-primary)">
                    <span class="text-xl">ğŸ¤²</span>
                    Ø§Ø¯Ø¹ÛŒÙ‡ Ùˆ Ø²ÛŒØ§Ø±Ø§Øª
                </h3>
                <div class="grid grid-cols-2 gap-3">
                    <label class="flex items-center gap-2 p-3 rounded-xl cursor-pointer" style="background: var(--bg-primary)">
                        <input type="checkbox" id="duaAshura" class="w-5 h-5 rounded">
                        <span class="text-sm">Ø²ÛŒØ§Ø±Øª Ø¹Ø§Ø´ÙˆØ±Ø§</span>
                    </label>
                    <label class="flex items-center gap-2 p-3 rounded-xl cursor-pointer" style="background: var(--bg-primary)">
                        <input type="checkbox" id="duaYasin" class="w-5 h-5 rounded">
                        <span class="text-sm">Ø²ÛŒØ§Ø±Øª Ø¢Ù„ ÛŒØ§Ø³ÛŒÙ†</span>
                    </label>
                    <label class="flex items-center gap-2 p-3 rounded-xl cursor-pointer" style="background: var(--bg-primary)">
                        <input type="checkbox" id="duaAminAllah" class="w-5 h-5 rounded">
                        <span class="text-sm">Ø§Ù…ÛŒÙ† Ø§Ù„Ù„Ù‡</span>
                    </label>
                    <label class="flex items-center gap-2 p-3 rounded-xl cursor-pointer" style="background: var(--bg-primary)">
                        <input type="checkbox" id="duaSalawat" class="w-5 h-5 rounded">
                        <span class="text-sm">ØµÙ„ÙˆØ§Øª Ø­Ø¶Ø±Øª Ø²Ù‡Ø±Ø§</span>
                    </label>
                    <label class="flex items-center gap-2 p-3 rounded-xl cursor-pointer" style="background: var(--bg-primary)">
                        <input type="checkbox" id="duaAhd" class="w-5 h-5 rounded">
                        <span class="text-sm">Ø¯Ø¹Ø§ÛŒ Ø¹Ù‡Ø¯</span>
                    </label>
                    <label class="flex items-center gap-2 p-3 rounded-xl cursor-pointer" style="background: var(--bg-primary)">
                        <input type="checkbox" id="duaKisa" class="w-5 h-5 rounded">
                        <span class="text-sm">Ø­Ø¯ÛŒØ« Ú©Ø³Ø§</span>
                    </label>
                    <label class="flex items-center gap-2 p-3 rounded-xl cursor-pointer" style="background: var(--bg-primary)">
                        <input type="checkbox" id="duaTawassul" class="w-5 h-5 rounded">
                        <span class="text-sm">Ø¯Ø¹Ø§ÛŒ ØªÙˆØ³Ù„</span>
                    </label>
                    <label class="flex items-center gap-2 p-3 rounded-xl cursor-pointer" style="background: var(--bg-primary)">
                        <input type="checkbox" id="duaKumayl" class="w-5 h-5 rounded">
                        <span class="text-sm">Ø¯Ø¹Ø§ÛŒ Ú©Ù…ÛŒÙ„</span>
                    </label>
                </div>
            </div>

            <!-- Quran Section -->
            <div class="card rounded-2xl p-4 shadow-md mb-4">
                <h3 class="font-bold mb-4 flex items-center gap-2" style="color: var(--text-primary)">
                    <span class="text-xl">ğŸ“–</span>
                    ØªÙ„Ø§ÙˆØª Ù‚Ø±Ø¢Ù† Ú©Ø±ÛŒÙ…
                </h3>
                <div class="flex items-center justify-center gap-4 p-3 rounded-xl" style="background: var(--bg-primary)">
                    <span class="text-sm">ØªØ¹Ø¯Ø§Ø¯ ØµÙØ­Ø§Øª:</span>
                    <div class="flex items-center gap-3">
                        <button onclick="changeQuranPages(-1)" class="counter-btn">âˆ’</button>
                        <span id="quranPages" class="text-2xl font-bold w-12 text-center" style="color: var(--accent)">0</span>
                        <button onclick="changeQuranPages(1)" class="counter-btn">+</button>
                    </div>
                </div>
            </div>

            <!-- Salawat Section -->
            <div class="card rounded-2xl p-4 shadow-md mb-4">
                <h3 class="font-bold mb-4 flex items-center gap-2" style="color: var(--text-primary)">
                    <span class="text-xl">âœ¨</span>
                    ØµÙ„ÙˆØ§Øª
                </h3>
                <div class="flex items-center justify-center gap-4 p-3 rounded-xl" style="background: var(--bg-primary)">
                    <span class="text-sm">ØªØ¹Ø¯Ø§Ø¯ ØµÙ„ÙˆØ§Øª:</span>
                    <div class="flex items-center gap-3">
                        <button onclick="changeSalawat(-10)" class="counter-btn">âˆ’Û±Û°</button>
                        <span id="salawatCount" class="text-2xl font-bold w-16 text-center" style="color: var(--accent)">0</span>
                        <button onclick="changeSalawat(10)" class="counter-btn">+Û±Û°</button>
                    </div>
                </div>
                <p class="text-xs text-center mt-2" style="color: var(--text-secondary)">Ø³Ù†Ú¯ÛŒÙ†ØªØ±ÛŒÙ† Ø¹Ù…Ù„ÛŒ ÙƒÙ‡ Ø±ÙˆØ² Ù‚ÛŒØ§Ù…Øª Ø¯Ø± ØªØ±Ø§Ø²ÙˆÛŒ Ø§Ø¹Ù…Ø§Ù„ Ù‚Ø±Ø§Ø± Ø¯Ø§Ø¯Ù‡ Ù…ÛŒØ´ÙˆØ¯ØŒ ØµÙ„ÙˆØ§Øª Ø¨Ø± Ù…Ø­Ù…Ø¯ Ùˆ Ø§Ù‡Ù„Ø¨ÛŒØª Ú¯Ø±Ø§Ù…ÛŒ Ø§ÛŒØ´Ø§Ù† Ø¹Ù„ÛŒÙ‡Ù… Ø§Ù„Ø³Ù„Ø§Ù… Ø§Ø³Øª</p>
            </div>

            <!-- Submit Button -->
            <button id="submitBtn" onclick="submitDaily()" class="w-full bg-gradient-to-r from-green-600 to-emerald-600 text-white py-4 rounded-2xl font-bold text-lg shadow-lg hover:shadow-xl transition-all flex items-center justify-center gap-2">
                <span>âœ“</span>
                <span id="submitBtnText">Ø«Ø¨Øª Ø§Ø¹Ù…Ø§Ù„ Ø±ÙˆØ²Ø§Ù†Ù‡</span>
            </button>
        </section>

        <!-- Dashboard Section -->
        <section id="dashboardSection" class="hidden">
            <!-- Time Period Tabs -->
            <div class="flex justify-center gap-2 mb-4 flex-wrap">
                <button onclick="switchDashboardTab('weekly')" id="tabWeekly" class="tab-btn active">
                    Û· Ø±ÙˆØ² Ø§Ø®ÛŒØ±
                </button>
                <button onclick="switchDashboardTab('monthly')" id="tabMonthly" class="tab-btn">
                    Û³Û° Ø±ÙˆØ² Ø§Ø®ÛŒØ±
                </button>
                <button onclick="switchDashboardTab('sixmonth')" id="tabSixMonth" class="tab-btn">
                    Û¶ Ù…Ø§Ù‡ Ø§Ø®ÛŒØ±
                </button>
                <button onclick="switchDashboardTab('total')" id="tabTotal" class="tab-btn">
                    Ú¯Ø²Ø§Ø±Ø´ Ú©Ù„
                </button>
            </div>

            <!-- Stats Cards -->
            <div id="statsCards" class="grid grid-cols-2 gap-3 mb-4">
                <div class="card rounded-2xl p-4 text-center shadow-md">
                    <p class="text-3xl font-bold text-green-600" id="statsOntimePrayers">0</p>
                    <p class="text-xs mt-1" style="color: var(--text-secondary)">Ù†Ù…Ø§Ø² Ø§ÙˆÙ„ ÙˆÙ‚Øª</p>
                </div>
                <div class="card rounded-2xl p-4 text-center shadow-md">
                    <p class="text-3xl font-bold text-yellow-500" id="statsMidtimePrayers">0</p>
                    <p class="text-xs mt-1" style="color: var(--text-secondary)">Ù†Ù…Ø§Ø² Ù…ÛŒØ§Ù† ÙˆÙ‚Øª</p>
                </div>
                <div class="card rounded-2xl p-4 text-center shadow-md">
                    <p class="text-3xl font-bold text-orange-400" id="statsEndtimePrayers">0</p>
                    <p class="text-xs mt-1" style="color: var(--text-secondary)">Ù†Ù…Ø§Ø² Ø¢Ø®Ø± ÙˆÙ‚Øª</p>
                </div>
                <div class="card rounded-2xl p-4 text-center shadow-md">
                    <p class="text-3xl font-bold text-red-600" id="statsQazaPrayers">0</p>
                    <p class="text-xs mt-1" style="color: var(--text-secondary)">Ù†Ù…Ø§Ø² Ù‚Ø¶Ø§</p>
                </div>
                <div class="card rounded-2xl p-4 text-center shadow-md">
                    <p class="text-3xl font-bold" style="color: var(--accent)" id="statsQuranPages">0</p>
                    <p class="text-xs mt-1" style="color: var(--text-secondary)">ØµÙØ­Ø§Øª Ù‚Ø±Ø¢Ù†</p>
                </div>
                <div class="card rounded-2xl p-4 text-center shadow-md">
                    <p class="text-3xl font-bold" style="color: var(--accent)" id="statsDuas">0</p>
                    <p class="text-xs mt-1" style="color: var(--text-secondary)">Ø§Ø¯Ø¹ÛŒÙ‡ Ø®ÙˆØ§Ù†Ø¯Ù‡ Ø´Ø¯Ù‡</p>
                </div>
                <div class="card rounded-2xl p-4 text-center shadow-md col-span-2">
                    <p class="text-3xl font-bold text-purple-600" id="statsSalawat">0</p>
                    <p class="text-xs mt-1" style="color: var(--text-secondary)">ØªØ¹Ø¯Ø§Ø¯ ØµÙ„ÙˆØ§Øª</p>
                </div>
            </div>

            <!-- Total Days Card (Only for Total Tab) -->
            <div id="totalDaysCard" class="hidden mb-4">
                <div class="card rounded-2xl p-4 text-center shadow-md border-2 border-green-500">
                    <p class="text-4xl font-bold text-green-600" id="statsTotalDays">0</p>
                    <p class="text-sm mt-1" style="color: var(--text-secondary)">Ø±ÙˆØ² Ø«Ø¨Øª Ø§Ø¹Ù…Ø§Ù„</p>
                </div>
            </div>

            <!-- Line Chart -->
            <div id="lineChartContainer" class="card rounded-2xl p-4 shadow-md mb-4">
                <h3 class="font-bold mb-4 flex items-center gap-2" style="color: var(--text-primary)">
                    <span>ğŸ“ˆ</span>
                    <span id="chartTitle">Ø¹Ù…Ù„Ú©Ø±Ø¯ Û· Ø±ÙˆØ² Ø§Ø®ÛŒØ±</span>
                </h3>
                <canvas id="performanceChart" height="200"></canvas>
            </div>

            <!-- Prayer Quality Chart -->
            <div class="card rounded-2xl p-4 shadow-md">
                <h3 class="font-bold mb-4 flex items-center gap-2" style="color: var(--text-primary)">
                    <span>ğŸ¥§</span>
                    <span id="pieChartTitle">ØªØ­Ù„ÛŒÙ„ Ú©ÛŒÙÛŒØª Ù†Ù…Ø§Ø²Ù‡Ø§</span>
                </h3>
                <div class="flex justify-center">
                    <div style="max-width: 220px; max-height: 220px;">
                        <canvas id="prayerQualityChart"></canvas>
                    </div>
                </div>
            </div>
        </section>

        <!-- Quran & Duas Section -->
       <section id="quranDuasSection" class="hidden">
    <div class="mx-2 mb-6 text-center">
        <h2 class="text-xl font-bold" style="color: var(--text-primary)">Ù…Ø§Ù…ÙˆØ±ÛŒØª Ù‡Ø§ÛŒ Ù‡ÙØªÚ¯ÛŒ</h2>
        <p class="text-xs mt-1" style="color: var(--text-secondary)">Ø§Ø² Ø´Ù†Ø¨Ù‡ ØªØ§ Ø¬Ù…Ø¹Ù‡ â€¢ Ù‡Ø± Ù‡ÙØªÙ‡ Ù…Ø§Ù…ÙˆØ±ÛŒØª Ù‡Ø§ ØªÚ©Ø±Ø§Ø± Ù…ÛŒØ´ÙˆÙ†Ø¯</p>
    </div>

    <div class="mb-6">
        <h3 class="flex items-center gap-2 font-bold mb-3 text-sm text-green-600 px-2">
            <span class="w-2 h-2 rounded-full bg-green-600"></span> Ø³Ø·Ø­ Ø¢Ø³Ø§Ù†
        </h3>
        <div id="easyAchievements" class="space-y-3">
            </div>
    </div>

    <div class="mb-6">
        <h3 class="flex items-center gap-2 font-bold mb-3 text-sm text-yellow-600 px-2">
            <span class="w-2 h-2 rounded-full bg-yellow-600"></span> Ø³Ø·Ø­ Ù…ØªÙˆØ³Ø·
        </h3>
        <div id="mediumAchievements" class="space-y-3"></div>
    </div>

    <div class="mb-8">
        <h3 class="flex items-center gap-2 font-bold mb-3 text-sm text-red-600 px-2">
            <span class="w-2 h-2 rounded-full bg-red-600"></span> Ø³Ø·Ø­ Ø³Ø®Øª
        </h3>
        <div id="hardAchievements" class="space-y-3"></div>
    </div>
</section>    
            <!-- Quick Links -->
        </section>

        <!-- Settings Section -->
        <section id="settingsSection" class="hidden">
            <!-- Dark Mode Toggle -->
            <div class="card rounded-2xl p-4 shadow-md mb-4">
                <h3 class="font-bold mb-4 flex items-center gap-2" style="color: var(--text-primary)">
                    <span>ğŸ¨</span>
                    ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø¸Ø§Ù‡Ø±ÛŒ
                </h3>
                <div class="flex items-center justify-between p-3 rounded-xl" style="background: var(--bg-primary)">
                    <span>Ø­Ø§Ù„Øª ØªØ§Ø±ÛŒÚ©</span>
                    <label class="toggle-switch">
                        <input type="checkbox" id="darkModeToggle" onchange="toggleDarkMode()">
                        <span class="toggle-slider"></span>
                    </label>
                </div>
            </div>


<div class="card rounded-2xl p-4 mb-6">
    <h3 class="font-bold mb-4 flex items-center gap-2">
        <i class="fas fa-database text-blue-500"></i> Ù…Ø¯ÛŒØ±ÛŒØª Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ (Ù¾Ø´ØªÛŒØ¨Ø§Ù†â€ŒÚ¯ÛŒØ±ÛŒ)
    </h3>
    <div class="grid grid-cols-2 gap-3">
        <button onclick="exportBackup()" class="flex flex-col items-center justify-center p-3 rounded-xl bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800">
            <i class="fas fa-download text-blue-600 mb-2"></i>
            <span class="text-xs font-bold">Ø°Ø®ÛŒØ±Ù‡ Ù†Ø³Ø®Ù‡ Ù¾Ø´ØªÛŒØ¨Ø§Ù†</span>
        </button>
        
        <label for="importFile" class="flex flex-col items-center justify-center p-3 rounded-xl bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 cursor-pointer">
            <i class="fas fa-upload text-green-600 mb-2"></i>
            <span class="text-xs font-bold">Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ ÙØ§ÛŒÙ„ Ù¾Ø´ØªÛŒØ¨Ø§Ù†</span>
            <input type="file" id="importFile" class="hidden" accept=".json" onchange="importBackup(event)">
        </label>
    </div>
    <p class="text-[10px] text-gray-500 mt-3 text-center">Ù†Ú©ØªÙ‡: Ø¨Ø§ Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ ÙØ§ÛŒÙ„ØŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª ÙØ¹Ù„ÛŒ Ø¨Ø§ Ø§Ø·Ù„Ø§Ø¹Ø§Øª ÙØ§ÛŒÙ„ Ø¬Ø§ÛŒÚ¯Ø²ÛŒÙ† Ù…ÛŒâ€ŒØ´ÙˆØ¯.</p>
</div>



            <!-- Scoring System -->
            <div class="card rounded-2xl p-4 shadow-md mb-4">
                <h3 class="font-bold mb-4 flex items-center gap-2" style="color: var(--text-primary)">
                    <span>â­</span>
                    Ù†Ø¸Ø§Ù… Ø§Ù…ØªÛŒØ§Ø²Ø¯Ù‡ÛŒ
                </h3>
                <div class="space-y-2 text-sm">
                    <div class="flex justify-between p-2 rounded-lg" style="background: var(--bg-primary)">
                        <span>Ù†Ù…Ø§Ø² Ø§ÙˆÙ„ ÙˆÙ‚Øª</span>
                        <span class="font-bold text-green-600">Û±Û° Ø§Ù…ØªÛŒØ§Ø²</span>
                    </div>
                    <div class="flex justify-between p-2 rounded-lg" style="background: var(--bg-primary)">
                        <span>Ù†Ù…Ø§Ø² Ù…ÛŒØ§Ù† ÙˆÙ‚Øª</span>
                        <span class="font-bold text-yellow-500">Û· Ø§Ù…ØªÛŒØ§Ø²</span>
                    </div>
                    <div class="flex justify-between p-2 rounded-lg" style="background: var(--bg-primary)">
                        <span>Ù†Ù…Ø§Ø² Ø¢Ø®Ø± ÙˆÙ‚Øª</span>
                        <span class="font-bold text-orange-400">Û´ Ø§Ù…ØªÛŒØ§Ø²</span>
                    </div>
                    <div class="flex justify-between p-2 rounded-lg" style="background: var(--bg-primary)">
                        <span>Ù†Ù…Ø§Ø² Ù‚Ø¶Ø§</span>
                        <span class="font-bold text-red-600">Û° Ø§Ù…ØªÛŒØ§Ø²</span>
                    </div>
                    <div class="flex justify-between p-2 rounded-lg" style="background: var(--bg-primary)">
                        <span>Ù‡Ø± Ø¯Ø¹Ø§/Ø²ÛŒØ§Ø±Øª</span>
                        <span class="font-bold text-green-600">Ûµ Ø§Ù…ØªÛŒØ§Ø²</span>
                    </div>
                    <div class="flex justify-between p-2 rounded-lg" style="background: var(--bg-primary)">
                        <span>Ù‡Ø± ØµÙØ­Ù‡ Ù‚Ø±Ø¢Ù†</span>
                        <span class="font-bold text-green-600">Û´ Ø§Ù…ØªÛŒØ§Ø²</span>
                    </div>
                    <div class="flex justify-between p-2 rounded-lg" style="background: var(--bg-primary)">
                        <span>Ù‡Ø± Û±Û° ØµÙ„ÙˆØ§Øª</span>
                        <span class="font-bold text-green-600">Û± Ø§Ù…ØªÛŒØ§Ø²</span>
                    </div>
                    <div class="flex justify-between p-2 rounded-lg border-2 border-green-500" style="background: var(--bg-primary)">
                        <span class="font-bold">Ø­Ø¯Ø§Ú©Ø«Ø± Ø§Ù…ØªÛŒØ§Ø² Ø±ÙˆØ²Ø§Ù†Ù‡</span>
                        <span class="font-bold text-green-600">Û¸Û° Ø§Ù…ØªÛŒØ§Ø²</span>
                    </div>
                </div>
            </div>

            <!-- Delete All Data -->
            <div class="card rounded-2xl p-4 shadow-md mb-4">
                <h3 class="font-bold mb-4 flex items-center gap-2" style="color: var(--text-primary)">
                    <span>ğŸ—‘ï¸</span>
                    Ø­Ø°Ù Ø§Ø·Ù„Ø§Ø¹Ø§Øª
                </h3>
                <p class="text-sm mb-4" style="color: var(--text-secondary)">
                    Ø¨Ø§ Ú©Ù„ÛŒÚ© Ø±ÙˆÛŒ Ø¯Ú©Ù…Ù‡ Ø²ÛŒØ± ØªÙ…Ø§Ù… Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯Ù‡ Ø´Ù…Ø§ Ù¾Ø§Ú© Ø®ÙˆØ§Ù‡Ø¯ Ø´Ø¯. Ø§ÛŒÙ† Ø¹Ù…Ù„ Ù‚Ø§Ø¨Ù„ Ø¨Ø§Ø²Ú¯Ø´Øª Ù†ÛŒØ³Øª.
                </p>
                <button onclick="showDeleteModal()" class="w-full bg-red-600 hover:bg-red-700 text-white py-3 rounded-xl font-bold transition-all flex items-center justify-center gap-2">
                    <span>ğŸ—‘ï¸</span>
                    <span>Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† ØªÙ…Ø§Ù… Ø§Ø·Ù„Ø§Ø¹Ø§Øª</span>
                </button>
            </div>

            <!-- About Section -->
            <div class="card rounded-2xl p-4 shadow-md">
                <h3 class="font-bold mb-4 flex items-center gap-2" style="color: var(--text-primary)">
                    <span>â„¹ï¸</span>
                    Ø¯Ø±Ø¨Ø§Ø±Ù‡ Ù…Ø§
                </h3>
                <p class="text-sm leading-relaxed mb-4" style="color: var(--text-secondary)">
                     Ø§ÛŒÙ† Ø§Ø«Ø± Ø¯Ø± Ø±ÙˆØ² 13 Ø±Ø¬Ø¨ Ø³Ø§Ù„ 1446 Ù‡Ø¬Ø±ÛŒ Ù…ØµØ§Ø¯Ù Ø¨Ø§ 13 Ø¯ÛŒ Ù…Ø§Ù‡ Ø³Ø§Ù„ 1404  Ø¨Ù‡ Ù…Ù†Ø§Ø³Ø¨Øª ÙˆÙ„Ø§Ø¯Øª Ø§Ù…ÛŒØ±Ø§Ù„Ù…ÙˆÙ†ÛŒÙ† (Ø¹) Ø·Ø±Ø§Ø­ÛŒ Ùˆ Ù…Ù†ØªØ´Ø± Ø´Ø¯Ù‡ Ø´Ø¯Ù‡ Ø§Ø³Øª. Ø·Ø±Ø§Ø­ÛŒ Ùˆ ØªÙˆØ³Ø¹Ù‡ Ø§ÛŒÙ† Ø¨Ø±Ù†Ø§Ù…Ù‡ ØªÙˆØ³Ø· Ø´Ø±Ú©Øª Ø¨Ø±Ù†Ø§Ù…Ù‡ Ù†ÙˆÛŒØ³ÛŒ Ø¬Ø§ÙˆØ¯Ø§Ù† Ú¯ÛŒÙ…Ø² ØµÙˆØ±Øª Ú¯Ø±ÙØªÙ‡ Ø§Ø³Øª
                </p>
                <a href="https://javdanfard.ir/updateddastyar/minigames/" target="_blank" class="block w-full bg-gradient-to-r from-green-600 to-emerald-600 text-white py-3 rounded-xl font-bold text-center">
                    Ø¨Ø§Ø²Ø¯ÛŒØ¯ Ø§Ø² Ø³Ø§ÛŒØª
                </a>
            </div>
        </section>
    </main>

    <!-- Bottom Navigation -->
    <nav class="fixed bottom-0 left-0 right-0 shadow-2xl z-40" style="background: var(--bg-card); border-top: 1px solid var(--border-color)">
        <div class="flex justify-around items-center py-1">
            <button onclick="showSection('daily')" class="nav-item active flex flex-col items-center p-2 rounded-xl transition-all" id="navDaily">
                <span class="text-lg">ğŸ“</span>
                <span class="text-xs">Ø«Ø¨Øª Ø±ÙˆØ²Ø§Ù†Ù‡</span>
            </button>
            <button onclick="showSection('dashboard')" class="nav-item flex flex-col items-center p-2 rounded-xl transition-all" id="navDashboard">
                <span class="text-lg">ğŸ“Š</span>
                <span class="text-xs">Ú©Ø§Ø±Ù†Ø§Ù…Ù‡ Ø§Ø¹Ù…Ø§Ù„</span>
            </button>
            <button onclick="showSection('quranDuas')" class="nav-item flex flex-col items-center p-2 rounded-xl transition-all" id="navQuranDuas">
                <span class="text-lg">ğŸ“œ</span>
                <span class="text-xs">Ù…Ø§Ù…ÙˆØ±ÛŒØª Ù‡Ø§</span>
            </button>
            <button onclick="showSection('settings')" class="nav-item flex flex-col items-center p-2 rounded-xl transition-all" id="navSettings">
                <span class="text-lg">âš™ï¸</span>
                <span class="text-xs">ØªÙ†Ø¸ÛŒÙ…Ø§Øª</span>
            </button>
        </div>
    </nav>

    <script>
        // Hadiths from Imam Ali (AS)
        const hadiths = [
            "Ø§Ø±Ø²Ø´ Ù‡Ø± Ú©Ø³ Ø¨Ù‡ Ø§Ù†Ø¯Ø§Ø²Ù‡ Ù‡Ù…Øª Ø§ÙˆØ³Øª.",
            "Ø²Ø¨Ø§Ù†Øª Ø±Ø§ Ù†Ú¯Ù‡Ø¯Ø§Ø± ØªØ§ Ø¹Ù…Ø±Øª Ø¯Ø±Ø§Ø² Ø´ÙˆØ¯.",
            "Ø¨Ø²Ø±Ú¯ØªØ±ÛŒÙ† Ø¹ÛŒØ¨ Ø¢Ù† Ø§Ø³Øª Ú©Ù‡ Ø¹ÛŒØ¨ÛŒ Ø±Ø§ Ø¨Ø± Ø¯ÛŒÚ¯Ø±Ø§Ù† Ø¨Ú¯ÛŒØ±ÛŒ Ú©Ù‡ Ø®ÙˆØ¯ Ø¨Ù‡ Ø¢Ù† Ù…Ø¨ØªÙ„Ø§ÛŒÛŒ.",
            "Ø§ÛŒÙ…Ø§Ù† Ú†Ù‡Ø§Ø±Ù¾Ø§ÛŒÙ‡ Ø¯Ø§Ø±Ø¯: ØªÙˆÚ©Ù‘Ù„ Ø¨Ø± Ø®Ø¯Ø§ØŒ ÙˆØ§Ú¯Ø°Ø§Ø±Ø¯Ù† Ú©Ø§Ø± Ø¨Ù‡ Ø®Ø¯Ø§ØŒ ØªØ³Ù„ÛŒÙ… Ø¨Ù‡ Ø§Ù…Ø± Ø®Ø¯Ø§ Ùˆ Ø±Ø¶Ø§ Ø¨Ù‡ Ù‚Ø¶Ø§Ù‰ Ø§Ù„Ù‡Ù‰.",
            "ØµØ¨Ø± Ø¯Ùˆ Ú¯ÙˆÙ†Ù‡ Ø§Ø³Øª: ØµØ¨Ø± Ø¨Ø± Ø¢Ù†Ú†Ù‡ Ù†Ø§Ø®ÙˆØ´Ø§ÛŒÙ†Ø¯ Ø§Ø³Øª Ùˆ ØµØ¨Ø± Ø§Ø² Ø¢Ù†Ú†Ù‡ Ø¯ÙˆØ³Øª Ø¯Ø§Ø±ÛŒ.",
            "Ø¹Ù‚Ù„ Ù…Ø±Ø¯Ù… Ø¯Ø± Ø³Ø®Ù†Ø§Ù†Ø´Ø§Ù† Ù¾Ù†Ù‡Ø§Ù† Ø§Ø³Øª.",
            "Ù‡Ù†Ú¯Ø§Ù… ÙØªÙ†Ù‡ Ú†ÙˆÙ† Ø´ØªØ± Ø¯Ùˆ Ø³Ø§Ù„Ù‡ Ø¨Ø§Ø´ Ú©Ù‡ Ù†Ù‡ Ù¾Ø´ØªÙ‰ Ø¯Ø§Ø±Ø¯ ØªØ§ Ø³ÙˆØ§Ø±Ø´ Ø´ÙˆÙ†Ø¯ Ùˆ Ù†Ù‡ Ù¾Ø³ØªØ§Ù†Ù‰ ØªØ§ Ø´ÛŒØ±Ø´ Ø¯ÙˆØ´Ù†Ø¯.",
            "Ù…Ø±Ø¯Ù… Ø¯Ø´Ù…Ù† Ú†ÛŒØ²ÛŒ Ù‡Ø³ØªÙ†Ø¯ Ú©Ù‡ Ù†Ù…ÛŒâ€ŒØ¯Ø§Ù†Ù†Ø¯.",
            "Ø§Ø² Ú¯Ù†Ø¬â€ŒÙ‡Ø§ÛŒ Ø¨Ù‡Ø´Øª Ù†ÛŒÚ©ÛŒ Ú©Ø±Ø¯Ù† Ùˆ Ù¾Ù†Ù‡Ø§Ù† Ù†Ù…ÙˆØ¯Ù† Ú©Ø§Ø± [Ù†ÛŒÚ©]Ùˆ ØµØ¨Ø± Ø¨Ø± Ù…ØµÛŒØ¨Øªâ€ŒÙ‡Ø§ Ùˆ Ù†Ù‡Ø§Ù† Ú©Ø±Ø¯Ù† Ú¯Ø±ÙØªØ§Ø±ÛŒâ€ŒÙ‡Ø§ (ÛŒØ¹Ù†ÛŒ Ø¹Ø¯Ù… Ø´Ú©Ø§ÛŒØª Ø§Ø² Ø¢Ù†Ù‡Ø§) Ø§Ø³Øª",
            "Ù‡Ø± Ú©Ù‡ Ø§Ø² Ø®ÙˆØ¯ Ø±Ø§Ø¶ÛŒ Ø´Ø¯ØŒ Ø¨Ø¯Ú¯ÙˆÛŒØ§Ù† Ø¨Ø± Ø§Ùˆ Ø¨Ø³ÛŒØ§Ø± Ø´Ø¯Ù†Ø¯.",
            "Ø²Ø§Ù‡Ø¯ Ø¯Ø± Ø¯Ù†ÛŒØ§ Ú©Ø³ÛŒ Ø§Ø³Øª Ú©Ù‡ Ø­Ø±Ø§Ù… Ø¨Ø± ØµØ¨Ø±Ø´ ØºÙ„Ø¨Ù‡ Ù†Ú©Ù†Ø¯ Ùˆ Ø­Ù„Ø§Ù„ Ø§Ø² Ø´Ú©Ø±Ø´ Ø¨Ø§Ø² Ù†Ø¯Ø§Ø±Ø¯.",
            "Ø¯Ù†ÛŒØ§ Ù…Ø­Ù„ Ø¢Ø²Ù…Ø§ÛŒØ´ Ø§Ø³Øª Ù†Ù‡ Ø¢Ø±Ø§Ù…Ø´.",
            "Ø¹Ù„Ù… Ø¨Ù‡ØªØ± Ø§Ø² Ù…Ø§Ù„ Ø§Ø³ØªØŒ Ø²ÛŒØ±Ø§ Ø¹Ù„Ù… ØªÙˆ Ø±Ø§ Ù†Ú¯Ù‡Ø¨Ø§Ù† Ø§Ø³Øª Ùˆ ØªÙˆ Ù…Ø§Ù„ Ø±Ø§ Ù†Ú¯Ù‡Ø¨Ø§Ù†ÛŒ.",
            "ÙØ±ØµØª Ú†ÙˆÙ† Ø§Ø¨Ø± Ù…ÛŒâ€ŒÚ¯Ø°Ø±Ø¯ØŒ Ù¾Ø³ ÙØ±ØµØªâ€ŒÙ‡Ø§ÛŒ Ø®ÙˆØ¨ Ø±Ø§ ØºÙ†ÛŒÙ…Øª Ø´Ù…Ø§Ø±ÛŒØ¯.",
            "ØªÙˆØ§Ø¶Ø¹ Ø¨Ø§Ù„Ø§ØªØ±ÛŒÙ† Ø´Ø±Ø§ÙØª Ø§Ø³Øª.",
            "Ù†Ø§Ø¯Ø§Ù† Ø±Ø§ Ù†Ù‡ Ø¨Ø§ Ú¯ÙØªØ§Ø± Ùˆ Ù†Ù‡ Ø¨Ø§ Ø³Ú©ÙˆØª Ù†Ù…ÛŒâ€ŒØªÙˆØ§Ù† Ø§ØµÙ„Ø§Ø­ Ú©Ø±Ø¯.",
            "Ø³Ù‡ Ú†ÛŒØ² Ø±Ø§ Ø¨Ø§ Ø³Ù‡ Ú†ÛŒØ² Ø¨ÛŒØ§Ø²Ù…Ø§ÛŒÛŒØ¯: Ø´Ø¬Ø§Ø¹Øª Ø±Ø§ Ø¯Ø± Ø¬Ù†Ú¯ØŒ Ø§Ù…Ø§Ù†Øª Ø±Ø§ Ø¯Ø± Ù…Ø¹Ø§Ù…Ù„Ù‡ØŒ Ùˆ Ø¯ÙˆØ³ØªÛŒ Ø±Ø§ Ø¯Ø± Ú¯Ø±ÙØªØ§Ø±ÛŒ.",
            "Ø¢Ù† Ú©Ù‡ Ø¹ÛŒÙˆØ¨ Ù…Ø±Ø¯Ù… Ø±Ø§ Ø¨Ù†Ú¯Ø±Ø¯ Ùˆ Ø¢Ù† Ø±Ø§ Ù†Ø§Ù¾Ø³Ù†Ø¯ Ø¯Ø§Ù†Ø¯ Ø³Ù¾Ø³ Ø¨Ø±Ø§Ù‰ Ø®ÙˆØ¯ Ø±ÙˆØ§ Ø¯Ø§Ù†Ø¯ Ø§Ø­Ù…Ù‚ ÙˆØ§Ù‚Ø¹Ù‰ Ø§Ø³Øª.",
            "Ø¨Ø§ Ø¯ÙˆØ³ØªØª Ø¢Ø±Ø§Ù… Ø¨ÛŒØ§ØŒ Ú†Ù‡ Ø¨Ø³Ø§ Ú©Ù‡ Ø±ÙˆØ²ÛŒ Ø¯Ø´Ù…Ù†Øª Ø´ÙˆØ¯ Ùˆ Ø¨Ø§ Ø¯Ø´Ù…Ù†Øª Ø¢Ø±Ø§Ù… Ø¨ÛŒØ§ØŒ Ú†Ù‡ Ø¨Ø³Ø§ Ú©Ù‡ Ø±ÙˆØ²ÛŒ Ø¯ÙˆØ³ØªØª Ø´ÙˆØ¯.",
            "Ø¨Ø§ Ø¯Ø´Ù…Ù†Ù Ø¯ÙˆØ³ØªØª Ø¯ÙˆØ³Øª Ù…Ø´Ùˆ Ú©Ù‡ [Ø¨Ø§ Ø§ÛŒÙ† Ú©Ø§Ø±]Ø¨Ø§ Ø¯ÙˆØ³ØªØª Ø¯Ø´Ù…Ù†ÛŒ Ù…ÛŒÚ©Ù†ÛŒ.",
            "Ø±Ø§Ø³ØªÚ¯ÙˆÛŒÛŒ Ø§Ù…Ø§Ù†Øª Ø§Ø³Øª Ùˆ Ø¯Ø±ÙˆØºÚ¯ÙˆÛŒÛŒ Ø®ÛŒØ§Ù†Øª.",
            "Ø¯Ø± Ø¨Ø±Ø§Ø¨Ø± Ø³Ø®ØªÛŒâ€ŒÙ‡Ø§ ØµØ¨ÙˆØ± Ø¨Ø§Ø´ Ú©Ù‡ Ù¾Ø§ÛŒØ§Ù† Ù‡Ø± Ø³Ø®ØªÛŒ Ø¢Ø³Ø§Ù†ÛŒ Ø§Ø³Øª.",
            "Ø¢Ø¯Ù…ÛŒ Ø²ÛŒØ± Ø²Ø¨Ø§Ù† Ø®ÙˆØ¯ Ù¾Ù†Ù‡Ø§Ù† Ø§Ø³Øª.",
            "Ù‚Ù†Ø§Ø¹Øª Ú¯Ù†Ø¬ÛŒ Ø§Ø³Øª Ú©Ù‡ Ù¾Ø§ÛŒØ§Ù† Ù†Ù…ÛŒâ€ŒÙ¾Ø°ÛŒØ±Ø¯.",
            "Ø¯Ù„â€ŒÙ‡Ø§ Ø±Ø§ Ø¨Ø§ Ù†ØµÛŒØ­Øª Ø²ÛŒØ§Ø¯ Ø®Ø³ØªÙ‡ Ù†Ú©Ù†ÛŒØ¯.",
            "Ø¯Ø± Ø´Ú¯ÙØªÙ… Ø§Ø² Ù…ØªÚ©Ø¨Ø± Ú©Ù‡ Ø¯ÛŒØ±ÙˆØ² Ù†Ø·ÙÙ‡ Ø¨ÙˆØ¯ Ùˆ ÙØ±Ø¯Ø§ Ù…Ø±Ø¯Ø§Ø± Ø§Ø³Øª.",
            "Ù‡Ø± Ú©Ø³ Ø¨Ù‡ Ø®ÙˆØ¯ Ù…ØºØ±ÙˆØ± Ø´ÙˆØ¯ØŒ Ù‡Ù„Ø§Ú© Ù…ÛŒâ€ŒØ´ÙˆØ¯.",
            "Ù†ÛŒÚ©ÛŒ Ú©Ù† Ùˆ Ø¨Ù‡ Ø¯Ø±ÛŒØ§ Ø§Ù†Ø¯Ø§Ø² Ú©Ù‡ Ø±ÙˆØ²ÛŒ Ø¨Ù‡ ØªÙˆ Ø¨Ø§Ø² Ù…ÛŒâ€ŒÚ¯Ø±Ø¯Ø¯.",
            "Ø³Ø®Ø§ÙˆØªÙ…Ù†Ø¯ØªØ±ÛŒÙ† Ù…Ø±Ø¯Ù… Ú©Ø³ÛŒ Ø§Ø³Øª Ú©Ù‡ Ø¯Ø± Ù†Ø¨ÙˆØ¯ Ø®ÙˆØ¯ Ø¨Ø¨Ø®Ø´Ø¯.",
            "Ø³ØªÙ…Ú¯Ø± Ø±Ø§ Ø³Ù‡ Ù†Ø´Ø§Ù†Ù‡ Ø§Ø³Øª: Ø¨Ù‡ Ø²ÛŒØ±Ø¯Ø³ØªØ§Ù† Ø³ØªÙ… Ú©Ù†Ø¯ØŒ Ø¨Ù‡ Ø²Ø¨Ø±Ø¯Ø³ØªØ§Ù† Ù†Ø§ÙØ±Ù…Ø§Ù†ÛŒ Ùˆ Ø§Ø² Ø³ØªÙ…Ú¯Ø±Ø§Ù† Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ."
        ];

        // Daily messages
        const dailyMessages = [
            "Ú©Ø§Ø±Ø¨Ø± Ú¯Ø±Ø§Ù…ÛŒ, Ø¨Ù‡ Ø¯Ù„ÛŒÙ„ Ø´Ø±Ø§ÛŒØ· Ø¶Ø¹ÛŒÙ Ø§ÛŒÙ†ØªØ±Ù†Øª Ù…Ù…Ú©Ù† Ø§Ø³Øª Ø¨Ø±Ù†Ø§Ù…Ù‡ Ø¨Ø§ Ú©Ù…ÛŒ ØªØ§Ø®ÛŒØ± Ø¨Ø§Ø² Ø´ÙˆØ¯, Ø§Ø² ØµØ¨ÙˆØ±ÛŒ Ø´Ù…Ø§ Ù…Ú†Ú©Ø±ÛŒÙ…"
        ];

        // Prayer values storage
        const prayerValues = {
            prayerFajr: '',
            prayerZuhr: '',
            prayerMaghrib: ''
        };

        // Persian date functions
        function toPersianNum(num) {
            const persianDigits = ['Û°', 'Û±', 'Û²', 'Û³', 'Û´', 'Ûµ', 'Û¶', 'Û·', 'Û¸', 'Û¹'];
            return num.toString().replace(/\d/g, d => persianDigits[d]);
        }

        function getPersianDate(date = new Date()) {
            const options = { calendar: 'persian', year: 'numeric', month: 'long', day: 'numeric' };
            return new Intl.DateTimeFormat('fa-IR', options).format(date);
        }

        function getPersianDateKey(date = new Date()) {
            const options = { calendar: 'persian', year: 'numeric', month: '2-digit', day: '2-digit' };
            return new Intl.DateTimeFormat('fa-IR-u-nu-latn', options).format(date);
        }

        function getPersianDayName(date = new Date()) {
            const days = ['ÛŒÚ©Ø´Ù†Ø¨Ù‡', 'Ø¯ÙˆØ´Ù†Ø¨Ù‡', 'Ø³Ù‡â€ŒØ´Ù†Ø¨Ù‡', 'Ú†Ù‡Ø§Ø±Ø´Ù†Ø¨Ù‡', 'Ù¾Ù†Ø¬Ø´Ù†Ø¨Ù‡', 'Ø¬Ù…Ø¹Ù‡', 'Ø´Ù†Ø¨Ù‡'];
            return days[date.getDay()];
        }

        function getPersianMonthName(date = new Date()) {
            const options = { calendar: 'persian', month: 'long' };
            return new Intl.DateTimeFormat('fa-IR', options).format(date);
        }

        // State
        let currentDate = new Date();
        let selectedDate = new Date();
        let quranPagesCount = 0;
        let salawatCount = 0;
        let performanceChart = null;
        let prayerQualityChart = null;
        let currentDashboardTab = 'weekly';
        let openDropdown = null;

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            loadDarkMode();
            updateDateDisplay();
            loadDailyData();
            setRandomHadith();
            setDailyMessage();
            updateDashboard();
            
            // Close dropdowns when clicking outside
            document.addEventListener('click', (e) => {
                if (!e.target.closest('.prayer-select')) {
                    closeAllDropdowns();
                }
            });
        });

        function setRandomHadith() {
            const today = new Date();
            const seed = today.getFullYear() * 10000 + (today.getMonth() + 1) * 100 + today.getDate();
            const index = seed % hadiths.length;
            document.getElementById('dailyHadith').textContent = hadiths[index];
        }

        function setDailyMessage() {
            const today = new Date();
            const seed = today.getFullYear() * 10000 + (today.getMonth() + 1) * 100 + today.getDate();
            const index = seed % dailyMessages.length;
            document.getElementById('dailyMessage').textContent = dailyMessages[index];
        }

        function updateDateDisplay() {
            document.getElementById('currentDate').textContent = getPersianDate(currentDate);
            document.getElementById('selectedDateDisplay').textContent = getPersianDate(selectedDate);
            document.getElementById('selectedDayName').textContent = getPersianDayName(selectedDate);
            
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            const selected = new Date(selectedDate);
            selected.setHours(0, 0, 0, 0);
            
            const isFuture = selected > today;
            document.getElementById('prevDayBtn').disabled = isFuture;
        }

        function navigateDate(direction) {
            const newDate = new Date(selectedDate);
            newDate.setDate(newDate.getDate() + direction);
            
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            newDate.setHours(0, 0, 0, 0);
            
            if (newDate > today) {
                return;
            }
            
            selectedDate = newDate;
            updateDateDisplay();
            loadDailyData();
        }

        // Custom Prayer Dropdown Functions
        function togglePrayerDropdown(prayerId) {
            const btn = document.querySelector(`[data-prayer="${prayerId}"] .prayer-select-btn`);
            if (btn.classList.contains('disabled')) return;
            
            const dropdown = document.getElementById(`dropdown-${prayerId}`);
            const isOpen = dropdown.classList.contains('show');
            
            closeAllDropdowns();
            
            if (!isOpen) {
                dropdown.classList.add('show');
                openDropdown = prayerId;
            }
        }

        function closeAllDropdowns() {
            document.querySelectorAll('.prayer-dropdown').forEach(d => d.classList.remove('show'));
            openDropdown = null;
        }

        function selectPrayer(prayerId, value, text) {
            prayerValues[prayerId] = value;
            document.getElementById(prayerId).value = value;
            
            const btn = document.querySelector(`[data-prayer="${prayerId}"] .selected-text`);
            btn.textContent = text;
            
            // Update selected state
            const dropdown = document.getElementById(`dropdown-${prayerId}`);
            dropdown.querySelectorAll('.prayer-option').forEach(opt => {
                opt.classList.toggle('selected', opt.dataset.value === value);
            });
            
            closeAllDropdowns();
        }

        function setPrayerSelectValue(prayerId, value) {
            const labels = {
                '': 'Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯',
                'ontime': 'Ø§ÙˆÙ„ ÙˆÙ‚Øª â˜€ï¸',
                'midtime': 'Ù…ÛŒØ§Ù† ÙˆÙ‚Øª ğŸŒ¤ï¸',
                'endtime': 'Ø¢Ø®Ø± ÙˆÙ‚Øª ğŸŒ…',
                'qaza': 'Ù†Ù…Ø§Ø² Ù‚Ø¶Ø§ âŒ'
            };
            
            prayerValues[prayerId] = value;
            document.getElementById(prayerId).value = value;
            
            const btn = document.querySelector(`[data-prayer="${prayerId}"] .selected-text`);
            btn.textContent = labels[value] || 'Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯';
            
            const dropdown = document.getElementById(`dropdown-${prayerId}`);
            dropdown.querySelectorAll('.prayer-option').forEach(opt => {
                opt.classList.toggle('selected', opt.dataset.value === value);
            });
        }

        function setPrayerSelectDisabled(prayerId, disabled) {
            const btn = document.querySelector(`[data-prayer="${prayerId}"] .prayer-select-btn`);
            btn.classList.toggle('disabled', disabled);
        }

        function loadDailyData() {
            const dateKey = getPersianDateKey(selectedDate);
            const data = JSON.parse(localStorage.getItem('religiousData') || '{}');
            const dayData = data[dateKey] || {};
            
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            const selected = new Date(selectedDate);
            selected.setHours(0, 0, 0, 0);
            
            const isToday = selected.getTime() === today.getTime();
            const isPast = selected < today;
            const isSubmitted = dayData.submitted === true;
            
            // Set form values
            setPrayerSelectValue('prayerFajr', dayData.prayerFajr || '');
            setPrayerSelectValue('prayerZuhr', dayData.prayerZuhr || '');
            setPrayerSelectValue('prayerMaghrib', dayData.prayerMaghrib || '');
            
            document.getElementById('duaAshura').checked = dayData.duaAshura || false;
            document.getElementById('duaYasin').checked = dayData.duaYasin || false;
            document.getElementById('duaAminAllah').checked = dayData.duaAminAllah || false;
            document.getElementById('duaSalawat').checked = dayData.duaSalawat || false;
            document.getElementById('duaAhd').checked = dayData.duaAhd || false;
            document.getElementById('duaKisa').checked = dayData.duaKisa || false;
            document.getElementById('duaTawassul').checked = dayData.duaTawassul || false;
            document.getElementById('duaKumayl').checked = dayData.duaKumayl || false;
            
            quranPagesCount = dayData.quranPages || 0;
            document.getElementById('quranPages').textContent = toPersianNum(quranPagesCount);
            
            salawatCount = dayData.salawat || 0;
            document.getElementById('salawatCount').textContent = toPersianNum(salawatCount);
            
            // Handle form state
            const statusMsg = document.getElementById('statusMessage');
            const statusText = document.getElementById('statusText');
            const submitBtn = document.getElementById('submitBtn');
            const submitBtnText = document.getElementById('submitBtnText');
            
            const checkboxes = [
                document.getElementById('duaAshura'),
                document.getElementById('duaYasin'),
                document.getElementById('duaAminAllah'),
                document.getElementById('duaSalawat'),
                document.getElementById('duaAhd'),
                document.getElementById('duaKisa'),
                document.getElementById('duaTawassul'),
                document.getElementById('duaKumayl')
            ];
            
            if (isSubmitted) {
                statusMsg.classList.remove('hidden');
                statusText.textContent = 'Ø§Ø¹Ù…Ø§Ù„ Ø§ÛŒÙ† Ø±ÙˆØ² Ù‚Ø¨Ù„Ø§Ù‹ Ø«Ø¨Øª Ø´Ø¯Ù‡ Ùˆ Ù‚Ø§Ø¨Ù„ ØªØºÛŒÛŒØ± Ù†ÛŒØ³Øª.';
                submitBtn.disabled = true;
                submitBtn.classList.add('opacity-50');
                submitBtnText.textContent = 'Ø«Ø¨Øª Ø´Ø¯Ù‡ âœ“';
                checkboxes.forEach(el => el.disabled = true);
                setPrayerSelectDisabled('prayerFajr', true);
                setPrayerSelectDisabled('prayerZuhr', true);
                setPrayerSelectDisabled('prayerMaghrib', true);
                disableCounterButtons(true);
            } else if (isPast) {
                statusMsg.classList.remove('hidden');
                statusText.textContent = 'Ø§ÛŒÙ† Ø±ÙˆØ² Ú¯Ø°Ø´ØªÙ‡ Ùˆ Ø§Ø¹Ù…Ø§Ù„ Ø¢Ù† Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª. Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø«Ø¨Øª Ú©Ù†ÛŒØ¯.';
                submitBtn.disabled = false;
                submitBtn.classList.remove('opacity-50');
                submitBtnText.textContent = 'Ø«Ø¨Øª Ø§Ø¹Ù…Ø§Ù„ Ø±ÙˆØ²Ø§Ù†Ù‡';
                checkboxes.forEach(el => el.disabled = false);
                setPrayerSelectDisabled('prayerFajr', false);
                setPrayerSelectDisabled('prayerZuhr', false);
                setPrayerSelectDisabled('prayerMaghrib', false);
                disableCounterButtons(false);
            } else if (isToday) {
                statusMsg.classList.add('hidden');
                submitBtn.disabled = false;
                submitBtn.classList.remove('opacity-50');
                submitBtnText.textContent = 'Ø«Ø¨Øª Ø§Ø¹Ù…Ø§Ù„ Ø±ÙˆØ²Ø§Ù†Ù‡';
                checkboxes.forEach(el => el.disabled = false);
                setPrayerSelectDisabled('prayerFajr', false);
                setPrayerSelectDisabled('prayerZuhr', false);
                setPrayerSelectDisabled('prayerMaghrib', false);
                disableCounterButtons(false);
            }
        }

        function disableCounterButtons(disabled) {
            const buttons = document.querySelectorAll('.counter-btn');
            buttons.forEach(btn => {
                btn.style.opacity = disabled ? '0.5' : '1';
                btn.style.pointerEvents = disabled ? 'none' : 'auto';
            });
        }

        function changeQuranPages(delta) {
            quranPagesCount = Math.max(0, quranPagesCount + delta);
            document.getElementById('quranPages').textContent = toPersianNum(quranPagesCount);
        }

        function changeSalawat(delta) {
            salawatCount = Math.max(0, salawatCount + delta);
            document.getElementById('salawatCount').textContent = toPersianNum(salawatCount);
        }

        function showToast(message = 'Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø«Ø¨Øª Ø´Ø¯') {
            const toast = document.getElementById('toast');
            document.getElementById('toastMessage').textContent = message;
            toast.classList.remove('hidden');
            setTimeout(() => {
                toast.classList.add('hidden');
            }, 3000);
        }

        function submitDaily() {
            const dateKey = getPersianDateKey(selectedDate);
            const data = JSON.parse(localStorage.getItem('religiousData') || '{}');
            
            data[dateKey] = {
                prayerFajr: document.getElementById('prayerFajr').value,
                prayerZuhr: document.getElementById('prayerZuhr').value,
                prayerMaghrib: document.getElementById('prayerMaghrib').value,
                duaAshura: document.getElementById('duaAshura').checked,
                duaYasin: document.getElementById('duaYasin').checked,
                duaAminAllah: document.getElementById('duaAminAllah').checked,
                duaSalawat: document.getElementById('duaSalawat').checked,
                duaAhd: document.getElementById('duaAhd').checked,
                duaKisa: document.getElementById('duaKisa').checked,
                duaTawassul: document.getElementById('duaTawassul').checked,
                duaKumayl: document.getElementById('duaKumayl').checked,
                quranPages: quranPagesCount,
                salawat: salawatCount,
                submitted: true,
                date: dateKey
            };
            
            localStorage.setItem('religiousData', JSON.stringify(data));
            
            showToast();
            loadDailyData();
            updateDashboard();
        }

        function showSection(section) {
            document.getElementById('dailySection').classList.add('hidden');
            document.getElementById('dashboardSection').classList.add('hidden');
            document.getElementById('quranDuasSection').classList.add('hidden');
            document.getElementById('settingsSection').classList.add('hidden');
            document.getElementById('dateNavigation').classList.add('hidden');
            
            document.querySelectorAll('.nav-item').forEach(item => item.classList.remove('active'));
            
            if (section === 'daily') {
                document.getElementById('dailySection').classList.remove('hidden');
                document.getElementById('dateNavigation').classList.remove('hidden');
                document.getElementById('navDaily').classList.add('active');
            } else if (section === 'dashboard') {
                document.getElementById('dashboardSection').classList.remove('hidden');
                document.getElementById('navDashboard').classList.add('active');
                updateDashboard();
            } else if (section === 'quranDuas') {
                document.getElementById('quranDuasSection').classList.remove('hidden');
                document.getElementById('navQuranDuas').classList.add('active');
            } else if (section === 'settings') {
                document.getElementById('settingsSection').classList.remove('hidden');
                document.getElementById('navSettings').classList.add('active');
            }
        }

        function switchDashboardTab(tab) {
            currentDashboardTab = tab;
            document.getElementById('tabWeekly').classList.toggle('active', tab === 'weekly');
            document.getElementById('tabMonthly').classList.toggle('active', tab === 'monthly');
            document.getElementById('tabSixMonth').classList.toggle('active', tab === 'sixmonth');
            document.getElementById('tabTotal').classList.toggle('active', tab === 'total');
            
            // Show/hide elements based on tab
            const lineChartContainer = document.getElementById('lineChartContainer');
            const totalDaysCard = document.getElementById('totalDaysCard');
            
            if (tab === 'total') {
                lineChartContainer.classList.add('hidden');
                totalDaysCard.classList.remove('hidden');
                document.getElementById('pieChartTitle').textContent = 'ØªØ­Ù„ÛŒÙ„ Ú©Ù„ Ù†Ù…Ø§Ø²Ù‡Ø§';
            } else {
                lineChartContainer.classList.remove('hidden');
                totalDaysCard.classList.add('hidden');
                document.getElementById('pieChartTitle').textContent = 'ØªØ­Ù„ÛŒÙ„ Ú©ÛŒÙÛŒØª Ù†Ù…Ø§Ø²Ù‡Ø§';
                
                if (tab === 'weekly') {
                    document.getElementById('chartTitle').textContent = 'Ø¹Ù…Ù„Ú©Ø±Ø¯ Û· Ø±ÙˆØ² Ø§Ø®ÛŒØ±';
                } else if (tab === 'monthly') {
                    document.getElementById('chartTitle').textContent = 'Ø¹Ù…Ù„Ú©Ø±Ø¯ Û³Û° Ø±ÙˆØ² Ø§Ø®ÛŒØ±';
                } else if (tab === 'sixmonth') {
                    document.getElementById('chartTitle').textContent = 'Ø¹Ù…Ù„Ú©Ø±Ø¯ Û¶ Ù…Ø§Ù‡ Ø§Ø®ÛŒØ±';
                }
            }
            
            updateDashboard();
        }

        function calculateDailyScore(dayData) {
            const prayers = [dayData.prayerFajr, dayData.prayerZuhr, dayData.prayerMaghrib];
            const ontimeCount = prayers.filter(p => p === 'ontime').length;
            const midtimeCount = prayers.filter(p => p === 'midtime').length;
            const endtimeCount = prayers.filter(p => p === 'endtime').length;
            
            const duaCount = [
                dayData.duaAshura, dayData.duaYasin, dayData.duaAminAllah,
                dayData.duaSalawat, dayData.duaAhd, dayData.duaKisa,
                dayData.duaTawassul, dayData.duaKumayl
            ].filter(Boolean).length;
            
            const quranPages = dayData.quranPages || 0;
            const salawat = dayData.salawat || 0;
            
            const prayerScore = (ontimeCount * 10) + (midtimeCount * 7) + (endtimeCount * 4);
            const duaScore = duaCount * 5;
            const quranScore = quranPages * 4;
            const salawatScore = Math.floor(salawat / 10);
            
            return Math.min(80, prayerScore + duaScore + quranScore + salawatScore);
        }

        function updateDashboard() {
            const data = JSON.parse(localStorage.getItem('religiousData') || '{}');
            
            let days;
            if (currentDashboardTab === 'weekly') {
                days = 7;
            } else if (currentDashboardTab === 'monthly') {
                days = 30;
            } else if (currentDashboardTab === 'sixmonth') {
                days = 180;
            } else {
                days = 365 * 10; // Total - all data
            }
            
            let ontime = 0, midtime = 0, endtime = 0, qaza = 0;
            let duas = 0, quran = 0, salawat = 0;
            let totalDays = 0;
            
            const chartData = [];
            const prayerQuality = { ontime: 0, midtime: 0, endtime: 0, qaza: 0 };
            
            // For 6 month view, calculate monthly averages
            if (currentDashboardTab === 'sixmonth') {
                for (let m = 5; m >= 0; m--) {
                    const monthDate = new Date();
                    monthDate.setMonth(monthDate.getMonth() - m);
                    const monthName = getPersianMonthName(monthDate);
                    
                    let totalScore = 0;
                    let daysCount = 0;
                    
                    for (let d = 1; d <= 31; d++) {
                        const checkDate = new Date(monthDate.getFullYear(), monthDate.getMonth(), d);
                        if (checkDate.getMonth() !== monthDate.getMonth()) break;
                        if (checkDate > new Date()) break;
                        
                        const dateKey = getPersianDateKey(checkDate);
                        const dayData = data[dateKey] || {};
                        
                        if (dayData.submitted) {
                            totalScore += calculateDailyScore(dayData);
                            daysCount++;
                            
                            const prayers = [dayData.prayerFajr, dayData.prayerZuhr, dayData.prayerMaghrib];
                            ontime += prayers.filter(p => p === 'ontime').length;
                            midtime += prayers.filter(p => p === 'midtime').length;
                            endtime += prayers.filter(p => p === 'endtime').length;
                            qaza += prayers.filter(p => p === 'qaza').length;
                            
                            duas += [dayData.duaAshura, dayData.duaYasin, dayData.duaAminAllah,
                                dayData.duaSalawat, dayData.duaAhd, dayData.duaKisa,
                                dayData.duaTawassul, dayData.duaKumayl].filter(Boolean).length;
                            quran += dayData.quranPages || 0;
                            salawat += dayData.salawat || 0;
                            totalDays++;
                        }
                    }
                    
                    const avgScore = daysCount > 0 ? Math.round(totalScore / daysCount) : 0;
                    chartData.push({
                        label: monthName,
                        score: avgScore
                    });
                }
                
                prayerQuality.ontime = ontime;
                prayerQuality.midtime = midtime;
                prayerQuality.endtime = endtime;
                prayerQuality.qaza = qaza;
                
            } else if (currentDashboardTab === 'total') {
                // Calculate total stats
                Object.keys(data).forEach(dateKey => {
                    const dayData = data[dateKey];
                    if (dayData.submitted) {
                        totalDays++;
                        
                        const prayers = [dayData.prayerFajr, dayData.prayerZuhr, dayData.prayerMaghrib];
                        ontime += prayers.filter(p => p === 'ontime').length;
                        midtime += prayers.filter(p => p === 'midtime').length;
                        endtime += prayers.filter(p => p === 'endtime').length;
                        qaza += prayers.filter(p => p === 'qaza').length;
                        
                        duas += [dayData.duaAshura, dayData.duaYasin, dayData.duaAminAllah,
                            dayData.duaSalawat, dayData.duaAhd, dayData.duaKisa,
                            dayData.duaTawassul, dayData.duaKumayl].filter(Boolean).length;
                        quran += dayData.quranPages || 0;
                        salawat += dayData.salawat || 0;
                    }
                });
                
                prayerQuality.ontime = ontime;
                prayerQuality.midtime = midtime;
                prayerQuality.endtime = endtime;
                prayerQuality.qaza = qaza;
                
            } else {
                // Weekly or Monthly
                for (let i = days - 1; i >= 0; i--) {
                    const date = new Date();
                    date.setDate(date.getDate() - i);
                    const dateKey = getPersianDateKey(date);
                    const dayData = data[dateKey] || {};
                    
                    const prayers = [dayData.prayerFajr, dayData.prayerZuhr, dayData.prayerMaghrib];
                    const ontimeCount = prayers.filter(p => p === 'ontime').length;
                    const midtimeCount = prayers.filter(p => p === 'midtime').length;
                    const endtimeCount = prayers.filter(p => p === 'endtime').length;
                    const qazaCount = prayers.filter(p => p === 'qaza').length;
                    
                    const duaCount = [
                        dayData.duaAshura, dayData.duaYasin, dayData.duaAminAllah,
                        dayData.duaSalawat, dayData.duaAhd, dayData.duaKisa,
                        dayData.duaTawassul, dayData.duaKumayl
                    ].filter(Boolean).length;
                    
                    const quranPages = dayData.quranPages || 0;
                    const salawatDay = dayData.salawat || 0;
                    
                    ontime += ontimeCount;
                    midtime += midtimeCount;
                    endtime += endtimeCount;
                    qaza += qazaCount;
                    duas += duaCount;
                    quran += quranPages;
                    salawat += salawatDay;
                    
                    if (dayData.submitted) totalDays++;
                    
                    prayerQuality.ontime += ontimeCount;
                    prayerQuality.midtime += midtimeCount;
                    prayerQuality.endtime += endtimeCount;
                    prayerQuality.qaza += qazaCount;
                    
                    const dailyScore = calculateDailyScore(dayData);
                    
                    let label;
                    if (currentDashboardTab === 'weekly') {
                        label = i === 0 ? 'Ø§Ù…Ø±ÙˆØ²' : i === 1 ? 'Ø¯ÛŒØ±ÙˆØ²' : toPersianNum(i) + ' Ø±ÙˆØ² Ù‚Ø¨Ù„';
                    } else {
                        label = toPersianNum(days - i);
                    }
                    
                    chartData.push({
                        label: label,
                        score: dailyScore
                    });
                }
            }
            
            document.getElementById('statsOntimePrayers').textContent = toPersianNum(ontime);
            document.getElementById('statsMidtimePrayers').textContent = toPersianNum(midtime);
            document.getElementById('statsEndtimePrayers').textContent = toPersianNum(endtime);
            document.getElementById('statsQazaPrayers').textContent = toPersianNum(qaza);
            document.getElementById('statsQuranPages').textContent = toPersianNum(quran);
            document.getElementById('statsDuas').textContent = toPersianNum(duas);
            document.getElementById('statsSalawat').textContent = toPersianNum(salawat);
            document.getElementById('statsTotalDays').textContent = toPersianNum(totalDays);
            
            if (currentDashboardTab !== 'total') {
                updatePerformanceChart(chartData);
            }
            updatePrayerQualityChart(prayerQuality);
        }

        function updatePerformanceChart(data) {
            const ctx = document.getElementById('performanceChart').getContext('2d');
            const isDark = document.body.classList.contains('dark');
            const textColor = isDark ? '#a7f3d0' : '#064e3b';
            const gridColor = isDark ? 'rgba(167, 243, 208, 0.2)' : 'rgba(6, 78, 59, 0.1)';
            
            if (performanceChart) {
                performanceChart.destroy();
            }
            
            performanceChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: data.map(d => d.label),
                    datasets: [
                        {
                            label: 'Ø§Ù…ØªÛŒØ§Ø² Ø±ÙˆØ²Ø§Ù†Ù‡',
                            data: data.map(d => d.score),
                            borderColor: '#059669',
                            backgroundColor: 'rgba(5, 150, 105, 0.2)',
                            fill: true,
                            tension: 0.4,
                            pointRadius: 4,
                            pointBackgroundColor: '#059669',
                            pointBorderColor: '#fff',
                            pointBorderWidth: 2,
                            borderWidth: 3
                        }
                    ]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            rtl: true,
                            labels: {
                                color: textColor,
                                font: {
                                    family: 'Vazirmatn'
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 80,
                            ticks: {
                                color: textColor,
                                stepSize: 20
                            },
                            grid: {
                                color: gridColor
                            }
                        },
                        x: {
                            ticks: {
                                color: textColor,
                                font: {
                                    size: 9,
                                    family: 'Vazirmatn'
                                },
                                maxRotation: 45,
                                minRotation: 45
                            },
                            grid: {
                                color: gridColor
                            }
                        }
                    }
                }
            });
        }

        function updatePrayerQualityChart(data) {
            const ctx = document.getElementById('prayerQualityChart').getContext('2d');
            const isDark = document.body.classList.contains('dark');
            const textColor = isDark ? '#a7f3d0' : '#064e3b';
            
            if (prayerQualityChart) {
                prayerQualityChart.destroy();
            }
            
            prayerQualityChart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['Ø§ÙˆÙ„ ÙˆÙ‚Øª', 'Ù…ÛŒØ§Ù† ÙˆÙ‚Øª', 'Ø¢Ø®Ø± ÙˆÙ‚Øª', 'Ù†Ù…Ø§Ø² Ù‚Ø¶Ø§'],
                    datasets: [{
                        data: [data.ontime, data.midtime, data.endtime, data.qaza],
                        backgroundColor: ['#059669', '#eab308', '#f97316', '#dc2626'],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            rtl: true,
                            labels: {
                                color: textColor,
                                font: {
                                    size: 11,
                                    family: 'Vazirmatn'
                                },
                                padding: 10
                            }
                        }
                    }
                }
            });
        }

        function toggleDarkMode() {
            const isDark = document.getElementById('darkModeToggle').checked;
            document.documentElement.classList.toggle('dark', isDark);
            document.body.classList.toggle('dark', isDark);
            localStorage.setItem('darkMode', isDark);
            updateDashboard();
        }

        function loadDarkMode() {
            const isDark = localStorage.getItem('darkMode') === 'true';
            document.getElementById('darkModeToggle').checked = isDark;
            document.documentElement.classList.toggle('dark', isDark);
            document.body.classList.toggle('dark', isDark);
        }

        // Delete functions
        function showDeleteModal() {
            document.getElementById('confirmModal').classList.add('show');
        }

        function closeModal() {
            document.getElementById('confirmModal').classList.remove('show');
        }

        function confirmDelete() {
            localStorage.removeItem('religiousData');
            closeModal();
            showToast('ØªÙ…Ø§Ù… Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø­Ø°Ù Ø´Ø¯');
            loadDailyData();
            updateDashboard();
        }





 // ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ù…Ø§Ù…ÙˆØ±ÛŒØªâ€ŒÙ‡Ø§
    const achievementsConfig = [
        // Easy
        { id: 'e1', title: 'Ø°Ú©Ø± ØµÙ„ÙˆØ§Øª', desc: 'ÙØ±Ø³ØªØ§Ø¯Ù† Û±Û°Û° ØµÙ„ÙˆØ§Øª Ø¯Ø± Ù‡ÙØªÙ‡', goal: 100, type: 'salawat', level: 'easy', color: '#10b981' },
        { id: 'e2', title: 'Ù†ÙˆØ± Ù‚Ø±Ø¢Ù†', desc: 'ØªÙ„Ø§ÙˆØª Ûµ ØµÙØ­Ù‡ Ù‚Ø±Ø¢Ù† Ø¯Ø± Ù‡ÙØªÙ‡', goal: 5, type: 'quran', level: 'easy', color: '#10b981' },
        { id: 'e3', title: 'Ù…ÛŒØ«Ø§Ù‚ Ø¨Ø§ Ø§Ù…Ø§Ù…', desc: 'Û³ Ø¨Ø§Ø± Ù‚Ø±Ø§Ø¦Øª Ø¯Ø¹Ø§ÛŒ Ø¹Ù‡Ø¯', goal: 3, type: 'dua', targetDua: 'duaAhd', level: 'easy', color: '#10b981' },
        
        // Medium
        { id: 'm1', title: 'Ù†Ù…Ø§Ø²Ú¯Ø²Ø§Ø± Ø§ÙˆÙ„ ÙˆÙ‚Øª', desc: 'Û±Û° Ù†Ù…Ø§Ø² Ø§ÙˆÙ„ ÙˆÙ‚Øª (Ù‡Ø± Ù†Ù…Ø§Ø²ÛŒ)', goal: 10, type: 'anyOntime', level: 'medium', color: '#f59e0b' },
        { id: 'm2', title: 'Ù…Ø£Ù†ÙˆØ³ Ø¨Ø§ Ù‚Ø±Ø¢Ù†', desc: 'ØªÙ„Ø§ÙˆØª Û²Û° ØµÙØ­Ù‡ Ù‚Ø±Ø¢Ù† Ø¯Ø± Ù‡ÙØªÙ‡', goal: 20, type: 'quran', level: 'medium', color: '#f59e0b' },
        { id: 'm3', title: 'Ø§Ø±Ø§Ø¯Øª Ø¨Ù‡ Ø§Ù‡Ù„â€ŒØ¨ÛŒØª', desc: 'Ûµ Ø¨Ø§Ø± Ù‚Ø±Ø§Ø¦Øª Ø²ÛŒØ§Ø±Øª Ø¹Ø§Ø´ÙˆØ±Ø§ ÛŒØ§ Ø¢Ù„â€ŒÛŒØ§Ø³ÛŒÙ†', goal: 5, type: 'multiDua', targetDuas: ['duaAshura', 'duaYasin'], level: 'medium', color: '#f59e0b' },
        { id: 'm4', title: 'ØªØ¯Ø§ÙˆÙ… ØµÙ„ÙˆØ§Øª', desc: 'ÙØ±Ø³ØªØ§Ø¯Ù† ÛµÛ°Û° ØµÙ„ÙˆØ§Øª Ø¯Ø± Ù‡ÙØªÙ‡', goal: 500, type: 'salawat', level: 'medium', color: '#f59e0b' },

        // Hard
        { id: 'h1', title: 'Ø³Ø­Ø±Ø®ÛŒØ²ÛŒ', desc: 'Û· Ø¨Ø§Ø± Ù†Ù…Ø§Ø² ØµØ¨Ø­ Ø§ÙˆÙ„ ÙˆÙ‚Øª Ø¯Ø± Ù‡ÙØªÙ‡', goal: 7, type: 'specificOntime', targetPrayer: 'prayerFajr', level: 'hard', color: '#ef4444' },
        { id: 'h2', title: 'Ø®ØªÙ… Ù‡ÙØªÚ¯ÛŒ Ù‚Ø±Ø¢Ù†ÛŒ', desc: 'ØªÙ„Ø§ÙˆØª ÛµÛ° ØµÙØ­Ù‡ Ù‚Ø±Ø¢Ù† Ø¯Ø± Ù‡ÙØªÙ‡', goal: 50, type: 'quran', level: 'hard', color: '#ef4444' },
        { id: 'h3', title: 'Ø¨Ù†Ø¯Ú¯ÛŒ Ø®Ø§Ù„ØµØ§Ù†Ù‡', desc: 'Û²Û° Ù†Ù…Ø§Ø² Ø§ÙˆÙ„ ÙˆÙ‚Øª Ø¯Ø± Ù‡ÙØªÙ‡', goal: 20, type: 'anyOntime', level: 'hard', color: '#ef4444' }
    ];

    // Ù¾ÛŒØ¯Ø§ Ú©Ø±Ø¯Ù† Ø§Ø¨ØªØ¯Ø§ÛŒ Ù‡ÙØªÙ‡ (Ø´Ù†Ø¨Ù‡)
    function getStartOfWeek() {
        const now = new Date();
        const day = now.getDay(); // 0 is Sunday, 6 is Saturday
        const diff = (day + 1) % 7; // Ø¬Ø§Ø¨Ø¬Ø§ÛŒÛŒ Ø¨Ø±Ø§ÛŒ Ø§ÛŒÙ†Ú©Ù‡ Ø´Ù†Ø¨Ù‡ Ø¨Ø´ÙˆØ¯ Ø´Ø±ÙˆØ¹ Ù‡ÙØªÙ‡ (0)
        const start = new Date(now);
        start.setDate(now.getDate() - diff);
        start.setHours(0, 0, 0, 0);
        return start;
    }

    function calculateAchievements() {
        const data = JSON.parse(localStorage.getItem('religiousData') || '{}');
        const startOfWeek = getStartOfWeek();
        const today = new Date();
        
        // Ø±ÛŒØ³Øª Ú©Ø±Ø¯Ù† Ù…Ù‚Ø§Ø¯ÛŒØ± Ù¾ÛŒØ´Ø±ÙØª
        const progress = {};
        achievementsConfig.forEach(a => progress[a.id] = 0);

        // Ù¾ÛŒÙ…Ø§ÛŒØ´ Ø±ÙˆØ²Ù‡Ø§ÛŒ Ù‡ÙØªÙ‡ (Ø´Ù†Ø¨Ù‡ ØªØ§ Ø¬Ù…Ø¹Ù‡)
        for (let i = 0; i < 7; i++) {
            const checkDate = new Date(startOfWeek);
            checkDate.setDate(startOfWeek.getDate() + i);
            if (checkDate > today) break;

            const dateKey = getPersianDateKey(checkDate);
            const dayData = data[dateKey];

            if (dayData && dayData.submitted) {
                achievementsConfig.forEach(ach => {
                    if (ach.type === 'salawat') progress[ach.id] += (dayData.salawat || 0);
                    if (ach.type === 'quran') progress[ach.id] += (dayData.quranPages || 0);
                    if (ach.type === 'dua') if (dayData[ach.targetDua]) progress[ach.id]++;
                    if (ach.type === 'anyOntime') {
                        const ontimes = [dayData.prayerFajr, dayData.prayerZuhr, dayData.prayerMaghrib].filter(p => p === 'ontime').length;
                        progress[ach.id] += ontimes;
                    }
                    if (ach.type === 'specificOntime') {
                        if (dayData[ach.targetPrayer] === 'ontime') progress[ach.id]++;
                    }
                    if (ach.type === 'multiDua') {
                        ach.targetDuas.forEach(d => { if (dayData[d]) progress[ach.id]++; });
                    }
                });
            }
        }
        return progress;
    }

    function renderAchievements() {
        const progress = calculateAchievements();
        
        ['easy', 'medium', 'hard'].forEach(level => {
            const container = document.getElementById(`${level}Achievements`);
            container.innerHTML = '';
            
            achievementsConfig.filter(a => a.level === level).forEach(ach => {
                const current = progress[ach.id];
                const percent = Math.min(100, (current / ach.goal) * 100);
                
                const card = `
                    <div class="card achievement-card rounded-xl p-3 shadow-sm border-r-4" style="border-right-color: ${ach.color}">
                        <div class="flex justify-between items-start mb-2">
                            <div>
                                <h4 class="font-bold text-sm" style="color: var(--text-primary)">${ach.title}</h4>
                                <p class="text-[10px]" style="color: var(--text-secondary)">${ach.desc}</p>
                            </div>
                            <span class="text-[10px] font-bold" style="color: ${ach.color}">
                                ${toPersianNum(current)} / ${toPersianNum(ach.goal)}
                            </span>
                        </div>
                        <div class="progress-bar-bg">
                            <div class="progress-bar-fill" style="width: ${percent}%; background-color: ${ach.color}"></div>
                        </div>
                    </div>
                `;
                container.innerHTML += card;
            });
        });
    }

    // Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† renderAchievements Ø¨Ù‡ ØªØ§Ø¨Ø¹ Ø§ØµÙ„ÛŒ showSection
    const originalShowSection = showSection;
    showSection = function(section) {
        originalShowSection(section);
        if (section === 'quranDuas') {
            renderAchievements();
        }
    };





// Û±. ØªØ§Ø¨Ø¹ Ø¨Ø±Ø§ÛŒ Ø®Ø±ÙˆØ¬ÛŒ Ú¯Ø±ÙØªÙ† Ùˆ Ø¯Ø§Ù†Ù„ÙˆØ¯ ÙØ§ÛŒÙ„
function exportBackup() {
    const data = localStorage.getItem('religiousData');
    if (!data || data === '{}') {
        showToast('Ø§Ø·Ù„Ø§Ø¹Ø§ØªÛŒ Ø¨Ø±Ø§ÛŒ Ù¾Ø´ØªÛŒØ¨Ø§Ù†â€ŒÚ¯ÛŒØ±ÛŒ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯');
        return;
    }

    const blob = new Blob([data], { type: 'application/json' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    
    // Ù†Ø§Ù… ÙØ§ÛŒÙ„ Ø´Ø§Ù…Ù„ ØªØ§Ø±ÛŒØ® Ø±ÙˆØ²
    const today = new Date().toLocaleDateString('fa-IR').replace(/\//g, '-');
    a.href = url;
    a.download = `dastyar-ebadat-backup-${today}.json`;
    
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
    URL.revokeObjectURL(url);
    
    showToast('ÙØ§ÛŒÙ„ Ù¾Ø´ØªÛŒØ¨Ø§Ù† Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø¯Ø§Ù†Ù„ÙˆØ¯ Ø´Ø¯');
}

// Û². ØªØ§Ø¨Ø¹ Ø¨Ø±Ø§ÛŒ Ø®ÙˆØ§Ù†Ø¯Ù† ÙØ§ÛŒÙ„ Ùˆ Ø¬Ø§ÛŒÚ¯Ø²ÛŒÙ†ÛŒ Ø¯Ø± Ù…Ø±ÙˆØ±Ú¯Ø± Ø¬Ø¯ÛŒØ¯
function importBackup(event) {
    const file = event.target.files[0];
    if (!file) return;

    const reader = new FileReader();
    reader.onload = function(e) {
        try {
            const content = e.target.result;
            // Ø¨Ø±Ø±Ø³ÛŒ ØµØ­Øª ÙØ§ÛŒÙ„ (ÙØ±Ù…Øª JSON)
            JSON.parse(content); 
            
            if (confirm('Ø¢ÛŒØ§ Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ØŸ Ø¨Ø§ Ø§ÛŒÙ† Ú©Ø§Ø± Ø§Ø·Ù„Ø§Ø¹Ø§Øª ÙØ¹Ù„ÛŒ Ø­Ø°Ù Ùˆ Ø§Ø·Ù„Ø§Ø¹Ø§Øª ÙØ§ÛŒÙ„ Ø¬Ø§ÛŒÚ¯Ø²ÛŒÙ† Ù…ÛŒâ€ŒØ´ÙˆØ¯.')) {
                localStorage.setItem('religiousData', content);
                showToast('Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯!');
                
                // Ø±ÛŒÙ„ÙˆØ¯ Ú©Ø±Ø¯Ù† ØµÙØ­Ù‡ Ø¨Ø±Ø§ÛŒ Ø§Ø¹Ù…Ø§Ù„ ØªØºÛŒÛŒØ±Ø§Øª Ø¯Ø± Ù†Ù…ÙˆØ¯Ø§Ø±Ù‡Ø§ Ùˆ Ù„ÛŒØ³Øªâ€ŒÙ‡Ø§
                setTimeout(() => location.reload(), 1500);
            }
        } catch (err) {
            showToast('Ø®Ø·Ø§: ÙØ§ÛŒÙ„ Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø¯Ù‡ Ù…Ø¹ØªØ¨Ø± Ù†ÛŒØ³Øª');
        }
    };
    reader.readAsText(file);
}




    </script>
</body>
</html>

</html>
